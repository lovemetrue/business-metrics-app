
global:
  # Настройки по умолчанию (можно оставить пустыми для начала)

templates: 
  - 'templates/*.tmpl' 
  
# Маршрутизация алертов
route:
  # Группировать алерты по имени и меткам
  group_by: ['alertname', 'cluster']
  
  # Ждать 10 секунд перед отправкой первой группы
  group_wait: 10s
  
  # Отправлять обновления каждые 10 секунд
  group_interval: 10s
  
  # Повторять алерт каждые 1 час, если он не resolved
  repeat_interval: 1h
  
  # Получатель по умолчанию
  receiver: 'web.hook'

route:
  group_by: ['alertname']
  group_wait: 10s
  group_interval: 10s
  repeat_interval: 1h
  receiver: 'telegram-notifications'

receivers:
  - name: 'telegram-notifications'
    telegram_configs:
      - api_url: 'https://api.telegram.org'
        chat_id: -1763357182  # Заменить на реальный chat_id
        bot_token: '8202698104:AAFcKxctFDbQBPjeDSpG-TmIfKjHKWBv2T8'  # Заменить на реальный token
        parse_mode: 'HTML'
        message: '{{ template "telegram.message" . }}'
        
# Отключаем встроенные уведомления (для тестирования)
inhibit_rules:
  - source_match:
      severity: 'critical'
    target_match:
      severity: 'warning'
    equal: ['alertname', 'cluster', 'service']
